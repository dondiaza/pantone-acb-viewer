<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visor Pantone ACB</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
  </head>
  <body>
    <main class="layout">
      <header class="header">
        <h1>Visor Pantone ACB</h1>
        <p class="hint">Carga bibliotecas de muestras Adobe (*.acb, *.ase) desde <code>./acb/</code></p>
      </header>

      <section class="toolbar">
        <label class="zoom-control" for="zoomRange">
          Zoom de rejilla
          <input id="zoomRange" type="range" min="120" max="280" step="10" value="210" />
          <span id="zoomLabel" class="zoom-label">210px</span>
        </label>

        <button id="collapseAllBtn" class="secondary-button" type="button">Colapsar todo</button>

        <form id="hexSearchForm" class="search-form">
          <label for="hexInput">Buscar HEX</label>
          <input id="hexInput" name="hex" type="text" placeholder="#E4002B" />
          <label for="searchBookSelect">Paleta</label>
          <select id="searchBookSelect" name="book_id"></select>
          <button type="submit">Buscar Pantone</button>
        </form>
      </section>

      <section id="messages" class="messages"></section>

      <section id="searchResults" class="search-results" hidden>
        <h2>Resultados HEX</h2>
        <p id="searchSummary" class="hint"></p>
        <div id="searchCards" class="color-grid"></div>
        <div id="searchTextList" class="search-text-list"></div>
      </section>

      <section class="psd-section">
        <h2>Importador de Imagen/PSD</h2>
        <form id="psdForm" class="psd-form">
          <label for="psdFileInput">Archivos</label>
          <input id="psdFileInput" name="file" type="file" accept=".psd,.png,.jpg,.jpeg" multiple hidden />
          <div id="psdDropZone" class="psd-dropzone" role="button" tabindex="0">
            Arrastra y suelta archivos PSD/JPG/PNG aqui, o haz clic para seleccionarlos
          </div>
          <div id="psdFileName" class="hint">Ningun archivo seleccionado</div>

          <label for="urlInput">URL de archivo (opcional)</label>
          <input id="urlInput" type="url" placeholder="https://ejemplo.com/archivo.psd" />

          <label for="psdBookSelect">Sugerir con paleta</label>
          <select id="psdBookSelect" name="book_id"></select>

          <label for="noiseRange">Ruido / detalle</label>
          <input id="noiseRange" type="range" min="0" max="100" step="1" value="35" />
          <span id="noiseLabel" class="hint">35</span>

          <label for="maxColorsRange">Maximo de colores Pantone sugeridos</label>
          <input id="maxColorsRange" type="range" min="0" max="15" step="1" value="0" />
          <span id="maxColorsLabel" class="hint">Auto</span>

          <label class="check-line">
            <input id="includeHiddenChk" type="checkbox" />
            Incluir capas no visibles
          </label>

          <label class="check-line">
            <input id="includeOverlayChk" type="checkbox" checked />
            Incluir superposicion/efectos de color
          </label>

          <label class="check-line">
            <input id="ignoreBackgroundChk" type="checkbox" />
            Ignorar color de fondo (capas solidas completas)
          </label>

          <button type="submit">Analizar seleccion</button>
        </form>
        <p class="hint">
          A menor ruido, color mas global por capa. A mayor ruido, mas muestras distintas. Maximo de colores:
          0 = automatico.
        </p>
      </section>

      <section id="psdResults" class="psd-results" hidden>
        <h2>Sugerencias por Archivo</h2>
        <div id="psdResultsContainer" class="psd-results-container"></div>
      </section>

      <section id="books" class="books"></section>
    </main>
    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
  </body>
</html>
